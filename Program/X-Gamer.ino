#include<Arduino.h>
#include<U8g2lib.h>

const unsigned char Boot[] U8X8_PROGMEM = {

  0x03, 0x03, 0xF0, 0x3F, 0xFF, 0xF3, 0x3F, 0xFF, 0xF3, 0xFF, 0x03, 0x03, 0xF0, 0x3F, 0xFF, 0xF3,
  0x3F, 0xFF, 0xF3, 0xFF, 0x86, 0x01, 0x30, 0x00, 0x03, 0x33, 0x33, 0x03, 0x30, 0xF0, 0x86, 0x01,
  0x30, 0x00, 0x03, 0x33, 0x33, 0x03, 0x30, 0xF0, 0xCC, 0x00, 0x30, 0x00, 0x03, 0x33, 0x33, 0x03,
  0x30, 0xF0, 0xCC, 0x00, 0x30, 0x00, 0x03, 0x33, 0x33, 0x03, 0x30, 0xF0, 0x78, 0x00, 0x30, 0x00,
  0x03, 0x33, 0x33, 0x03, 0x30, 0xF0, 0x78, 0x00, 0x30, 0x00, 0x03, 0x33, 0x33, 0x03, 0x30, 0xF0,
  0x30, 0xF0, 0x31, 0x3E, 0xFF, 0x33, 0x33, 0xFF, 0xF3, 0xFF, 0x30, 0xF0, 0x31, 0x3E, 0xFF, 0x33,
  0x33, 0xFF, 0xF3, 0xFF, 0x78, 0x00, 0x30, 0x30, 0x03, 0x33, 0x33, 0x03, 0xF0, 0xC0, 0x78, 0x00,
  0x30, 0x30, 0x03, 0x33, 0x33, 0x03, 0xF0, 0xC1, 0xCC, 0x00, 0x30, 0x30, 0x03, 0x33, 0x33, 0x03,
  0xB0, 0xC3, 0xCC, 0x00, 0x30, 0x30, 0x03, 0x33, 0x33, 0x03, 0x30, 0xC7, 0x86, 0x01, 0x30, 0x30,
  0x03, 0x33, 0x33, 0x03, 0x30, 0xCE, 0x86, 0x01, 0x30, 0x30, 0x03, 0x33, 0x33, 0x03, 0x30, 0xDC,
  0x03, 0x03, 0xF0, 0x3F, 0x03, 0x33, 0x33, 0xFF, 0x33, 0xF8, 0x03, 0x03, 0xF0, 0x3F, 0x03, 0x33,
  0x33, 0xFF, 0x33, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
  0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF
};

int contrast = 0, num = 0, s = 0;
bool mute = false;

const int functions_num = 5;
const unsigned char functions_icon[functions_num][129] U8X8_PROGMEM = {
  {
    0x00, 0x00, 0xE0, 0x03, 0x00, 0x00, 0xF8, 0x03, 0x00, 0x00, 0xFC, 0x01, 0x00, 0x00, 0xFE, 0x00,
    0x00, 0x00, 0x7F, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x80, 0x1F, 0xC0, 0x00, 0x80, 0x1F, 0xE0,
    0x00, 0x80, 0x1F, 0xF0, 0x00, 0x80, 0x3F, 0xF8, 0x00, 0x80, 0x7F, 0xFC, 0x00, 0x00, 0xFF, 0x7F,
    0x00, 0x80, 0xFF, 0x7F, 0x00, 0xC0, 0xFF, 0x3F, 0x00, 0xE0, 0xFF, 0x1F, 0x00, 0xF0, 0xFF, 0x0F,
    0x00, 0xF8, 0xEF, 0x03, 0x00, 0xFC, 0x07, 0x00, 0x00, 0xFE, 0x03, 0x00, 0x00, 0xFF, 0x01, 0x00,
    0x80, 0xFF, 0x00, 0x00, 0xC0, 0x7F, 0x00, 0x00, 0xE0, 0x3F, 0x00, 0x00, 0xF0, 0x1F, 0x00, 0x00,
    0xF8, 0x0F, 0x00, 0x00, 0xFC, 0x07, 0x00, 0x00, 0xFE, 0x03, 0x00, 0x00, 0xFF, 0x01, 0x00, 0x00,
    0xFF, 0x00, 0x00, 0x00, 0x7F, 0x00, 0x00, 0x00, 0x3E, 0x00, 0x00, 0x00, 0x1C, 0x00, 0x00, 0x00
  },//Settings
  {
    0xFE, 0xFF, 0xFF, 0x7F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0x7F, 0x1F, 0x00, 0x00, 0x00, 0x1F, 0x00, 0x00, 0x00, 0x1F, 0x00, 0x00, 0x00,
    0x1F, 0x00, 0x00, 0x00, 0x1F, 0x00, 0x00, 0x00, 0x1F, 0x00, 0x00, 0x00, 0x1F, 0x00, 0x00, 0x00,
    0x1F, 0x00, 0x00, 0x00, 0x1F, 0x00, 0x00, 0x00, 0x1F, 0x70, 0x80, 0x7F, 0x1F, 0xF8, 0xC0, 0xFF,
    0x1F, 0xF8, 0xC0, 0xFF, 0x1F, 0xF8, 0xC0, 0xFF, 0x1F, 0x70, 0x80, 0xFF, 0x1F, 0x00, 0x00, 0xF8,
    0x1F, 0x00, 0x00, 0xF8, 0x1F, 0x00, 0x00, 0xF8, 0x1F, 0x00, 0x00, 0xF8, 0x1F, 0x00, 0x00, 0xF8,
    0x1F, 0x00, 0x00, 0xF8, 0x1F, 0x00, 0x00, 0xF8, 0x1F, 0x00, 0x00, 0xF8, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFE, 0xFF, 0xFF, 0x7F
  },//Snake
  {
    0x00, 0x00, 0xFC, 0x7F, 0x00, 0x00, 0xFE, 0xFF, 0x00, 0x00, 0xFE, 0xFF, 0x00, 0x00, 0xFE, 0xFF,
    0x00, 0x00, 0xFE, 0xFF, 0x00, 0x00, 0xFE, 0xFF, 0x00, 0x00, 0xFE, 0xFF, 0x00, 0x00, 0xFE, 0xFF,
    0x00, 0x00, 0xFE, 0xFF, 0x00, 0x00, 0xFE, 0xFF, 0x00, 0x00, 0xFE, 0xFF, 0x00, 0x00, 0xFE, 0xFF,
    0x00, 0x00, 0xFE, 0xFF, 0x00, 0x00, 0xFE, 0xFF, 0x00, 0x00, 0xFE, 0xFF, 0x00, 0x00, 0xFE, 0xFF,
    0x00, 0x00, 0xFE, 0xFF, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFE, 0xFF, 0xFF, 0x7F
  },//Blocks
  {
    0x00, 0xFE, 0x7F, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0x00,
    0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFE, 0x7F, 0x00, 0x00, 0xFE, 0x7F, 0x00, 0x00, 0xFC, 0x3F, 0x00,
    0x00, 0xFC, 0x3F, 0x00, 0x00, 0xF8, 0x1F, 0x00, 0x00, 0xF8, 0x1F, 0x00, 0x00, 0xF0, 0x0F, 0x00,
    0x00, 0xF0, 0x0F, 0x00, 0x00, 0xF0, 0x0F, 0x00, 0x00, 0xF0, 0x0F, 0x00, 0x00, 0xF0, 0x0F, 0x00,
    0x00, 0xF0, 0x0F, 0x00, 0x00, 0xF0, 0x0F, 0x00, 0x00, 0x70, 0x0E, 0x00, 0x00, 0xB0, 0x0D, 0x00,
    0x00, 0xB0, 0x0D, 0x00, 0x00, 0x30, 0x0C, 0x00, 0x00, 0x30, 0x0C, 0x00, 0x00, 0x70, 0x0E, 0x00,
    0x00, 0xF0, 0x0F, 0x00, 0x00, 0xF0, 0x0F, 0x00, 0x00, 0xF0, 0x0F, 0x00, 0x00, 0xF0, 0x0F, 0x00,
    0x00, 0xF0, 0x0F, 0x00, 0x00, 0xF0, 0x0F, 0x00, 0x00, 0xF0, 0x0F, 0x00, 0x00, 0xE0, 0x07, 0x00
  },//Light
  {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0xFE, 0x03,
    0x00, 0x00, 0xFF, 0x03, 0x00, 0x00, 0xFF, 0x03, 0x08, 0x00, 0xF8, 0x00, 0x1E, 0x00, 0xE0, 0x00,
    0xFC, 0x0F, 0xF0, 0x00, 0xE0, 0xFF, 0xFF, 0x01, 0x00, 0x00, 0xF0, 0x03, 0x00, 0x00, 0xF8, 0x07,
    0x00, 0xFC, 0xFF, 0x3F, 0x00, 0xFA, 0xFF, 0x3F, 0x00, 0x00, 0xE0, 0x7F, 0x00, 0x00, 0xF0, 0x7D,
    0x00, 0x00, 0x78, 0x3C, 0x00, 0x00, 0x7C, 0x3C, 0x00, 0x00, 0x1C, 0x0E, 0x00, 0x00, 0x3C, 0x0F,
    0x00, 0x00, 0xBC, 0x07, 0x00, 0x00, 0xFC, 0x03, 0x00, 0x00, 0xBC, 0x03, 0x00, 0x80, 0x9C, 0x03,
    0x00, 0xC0, 0x1F, 0x03, 0x00, 0xC0, 0x07, 0x03, 0x00, 0x00, 0x80, 0x03, 0x00, 0x00, 0xF0, 0x03,
    0x00, 0x00, 0xF8, 0x01, 0x00, 0x00, 0xE0, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  }//groove
};

const unsigned char groove_icon[3][4097] U8X8_PROGMEM = {
  {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xE0, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0xFE, 0x01, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xF8, 0xFF, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0x0F, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x0F, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x0F, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0x07, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0xFE, 0x01, 0x00,
    0x32, 0x00, 0x00, 0x00, 0x00, 0xFE, 0x00, 0x00, 0xFC, 0x07, 0x00, 0x00, 0x00, 0xFC, 0x00, 0x00,
    0xFC, 0xFF, 0x01, 0x00, 0x00, 0xFE, 0x00, 0x00, 0xF0, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0x01, 0x00,
    0xC0, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x03, 0x00, 0x00, 0xFC, 0xFF, 0xFF, 0xFF, 0xFF, 0x07, 0x00,
    0x00, 0x00, 0xF0, 0xFF, 0xFF, 0xFF, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFE, 0x0F, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xFF, 0x7F, 0x00,
    0x00, 0x00, 0xC0, 0xFF, 0xFF, 0xFF, 0xFF, 0x0D, 0x00, 0x00, 0xE0, 0xFF, 0xFF, 0xFF, 0xFF, 0x0F,
    0x00, 0x00, 0xE0, 0xFF, 0xFF, 0xFF, 0xFF, 0x0F, 0x00, 0x00, 0xC8, 0xFF, 0xFF, 0xFF, 0xFF, 0x1F,
    0x00, 0x00, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0x3F,
    0x00, 0x00, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFE, 0xF7, 0x3F,
    0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xE1, 0x3F, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x7F, 0xE0, 0x1F,
    0x00, 0x00, 0x00, 0x00, 0xC0, 0x7F, 0xE0, 0x0F, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x3F, 0xE0, 0x0F,
    0x00, 0x00, 0x00, 0x00, 0xF0, 0x0F, 0xF8, 0x07, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x07, 0xFC, 0x01,
    0x00, 0x00, 0x00, 0x00, 0xF0, 0x0F, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x0F, 0xFF, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xF0, 0x8F, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0xCF, 0x3F, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xF0, 0xCF, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0xEF, 0x1F, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xF0, 0xEF, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0xCF, 0x0F, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xF8, 0xC7, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x80, 0xF0, 0x87, 0x0F, 0x00,
    0x00, 0x00, 0x00, 0x20, 0xFC, 0x83, 0x0F, 0x00, 0x00, 0x00, 0x00, 0xF0, 0xFF, 0x03, 0x0F, 0x00,
    0x00, 0x00, 0x00, 0xF0, 0xFF, 0x01, 0x0F, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x7F, 0x00, 0x0F, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x0F, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x0F, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x80, 0xFF, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xFF, 0x07, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x0B, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF8, 0x03, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  },//1
  {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xFC, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x1F, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x80, 0xFF, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xFF, 0x1F, 0x00, 0x00,
    0x00, 0x00, 0x00, 0xC0, 0xFF, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0xFF, 0x3F, 0x00, 0x00,
    0x00, 0x00, 0x00, 0xE0, 0xFF, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0xFF, 0x3F, 0x00, 0x00,
    0xE0, 0x0F, 0x00, 0xF8, 0xFF, 0x3F, 0x00, 0x00, 0xE0, 0xFF, 0xFF, 0xFD, 0xFF, 0x7F, 0x00, 0x00,
    0xC0, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x80, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x01, 0x00,
    0x00, 0xF0, 0xFF, 0xFF, 0xFF, 0xFF, 0x03, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0xFF, 0xFF, 0x0F, 0x00,
    0x00, 0x00, 0xE0, 0xFF, 0xFF, 0xFF, 0x1F, 0x00, 0x00, 0x00, 0x00, 0xF8, 0xFF, 0xFF, 0x3F, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xF0, 0xFF, 0x7F, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00,
    0x00, 0x00, 0x80, 0xFF, 0xFF, 0xFF, 0x7F, 0x00, 0x00, 0x00, 0x80, 0xFF, 0xFF, 0xFF, 0xFF, 0x00,
    0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x01, 0x00, 0x00, 0x00, 0xF0, 0xF5, 0xFF, 0xFF, 0x03,
    0x00, 0x00, 0x00, 0x00, 0xF0, 0xFF, 0xFF, 0x03, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xFF, 0xFF, 0x03,
    0x00, 0x00, 0x00, 0x00, 0xC0, 0xFF, 0xFF, 0x03, 0x00, 0x00, 0x00, 0x00, 0xE0, 0xFF, 0xFF, 0x03,
    0x00, 0x00, 0x00, 0x00, 0xE0, 0xFF, 0xFF, 0x03, 0x00, 0x00, 0x00, 0x00, 0xF8, 0xFF, 0xFF, 0x03,
    0x00, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0xFF, 0x03, 0x00, 0x00, 0x00, 0x00, 0xFE, 0xFF, 0xFF, 0x01,
    0x00, 0x00, 0x00, 0x80, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xFF, 0xCF, 0x7F, 0x00,
    0x00, 0x00, 0x00, 0xF0, 0xFF, 0xFF, 0x1F, 0x00, 0x00, 0x00, 0x00, 0xF8, 0xFF, 0xFF, 0x0F, 0x00,
    0x00, 0x00, 0x00, 0xF8, 0xFF, 0xFF, 0x0F, 0x00, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0xFF, 0x01, 0x00,
    0x00, 0x00, 0x00, 0xF8, 0xFF, 0xFF, 0x01, 0x00, 0x00, 0x00, 0x00, 0xF0, 0xFF, 0xF7, 0x00, 0x00,
    0x00, 0x00, 0x00, 0xF0, 0xFF, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0xFF, 0x03, 0x00, 0x00,
    0x00, 0x00, 0x00, 0xE0, 0xFF, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0xFF, 0x1F, 0x00, 0x00,
    0x00, 0x00, 0x00, 0xF8, 0xFF, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x7F, 0x00, 0x00,
    0x00, 0x00, 0x80, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x80, 0xFF, 0xFF, 0xFF, 0x00, 0x00,
    0x00, 0x00, 0x80, 0xFF, 0x9F, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x07, 0xFF, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFD, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xF0, 0xFF, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0x01, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFE, 0xFF, 0x01, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x7F, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  },//2
  {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xE0, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF4, 0xFF, 0x03, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xFE, 0xFF, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x0F, 0x00,
    0x00, 0x00, 0x00, 0x80, 0xFF, 0xFF, 0x1F, 0x00, 0xF0, 0x1F, 0x00, 0xC0, 0xFF, 0xFF, 0x1F, 0x00,
    0xF0, 0x1F, 0x01, 0xC0, 0xFF, 0xFF, 0x3F, 0x00, 0xE0, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x3F, 0x00,
    0xC0, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x3F, 0x00, 0x80, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x1F, 0x00,
    0x00, 0xF8, 0xFD, 0xFF, 0xFF, 0xFF, 0x1F, 0x00, 0x00, 0xE0, 0xFF, 0xFF, 0xFF, 0xFF, 0x1F, 0x00,
    0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x1F, 0x00, 0x00, 0x00, 0x00, 0xF8, 0xFF, 0xFF, 0x1F, 0x00,
    0x00, 0x00, 0x00, 0xF8, 0xFF, 0xFF, 0x3F, 0x00, 0x00, 0x00, 0x00, 0xF8, 0xFF, 0xFF, 0x7F, 0x00,
    0x00, 0x00, 0x00, 0xFC, 0xFF, 0xFF, 0x3F, 0x00, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0xFF, 0xFF, 0x00,
    0x00, 0x00, 0x00, 0xF8, 0xFF, 0xFF, 0xFF, 0x01, 0x00, 0x00, 0x00, 0xF8, 0xFF, 0xFF, 0xFF, 0x00,
    0x00, 0x00, 0x00, 0xF0, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0xE0, 0xFF, 0xFF, 0xFF, 0x01,
    0x00, 0x00, 0x00, 0x80, 0xFF, 0xFF, 0xFF, 0x01, 0x00, 0x00, 0x00, 0x80, 0xFF, 0xFF, 0xFF, 0x00,
    0x00, 0x00, 0x00, 0xF0, 0xFF, 0xFF, 0x7F, 0x00, 0x00, 0x00, 0x00, 0xFE, 0xFF, 0xFF, 0x3F, 0x00,
    0x00, 0x00, 0xF0, 0xFF, 0xFF, 0xFF, 0x1F, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x1F, 0x00,
    0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x1F, 0x00, 0x00, 0xC0, 0xFF, 0xFF, 0xFF, 0xFF, 0x0F, 0x00,
    0x00, 0xF8, 0xFF, 0xFF, 0xFF, 0xFF, 0x1F, 0x00, 0x00, 0xFC, 0xFF, 0xFF, 0xFF, 0xFF, 0x1F, 0x00,
    0x00, 0xFC, 0xFF, 0xFF, 0xFF, 0xFF, 0x1F, 0x00, 0x00, 0xFC, 0xFF, 0xFF, 0xFF, 0xFF, 0x0F, 0x00,
    0x00, 0xF8, 0xFF, 0xFF, 0xFF, 0xFF, 0x0F, 0x00, 0x00, 0xFC, 0xFF, 0xFF, 0xFF, 0xFF, 0x0F, 0x00,
    0x00, 0xF0, 0xFF, 0xFF, 0xFF, 0xFF, 0x0F, 0x00, 0x00, 0xE0, 0xFF, 0xFF, 0xFF, 0xFF, 0x07, 0x00,
    0x00, 0x80, 0xFF, 0xFF, 0x8F, 0xFF, 0x07, 0x00, 0x00, 0x80, 0xFF, 0xFF, 0x03, 0xFE, 0x03, 0x00,
    0x00, 0xC0, 0xFF, 0xFF, 0x00, 0xFC, 0x01, 0x00, 0x00, 0xF0, 0xFF, 0x3F, 0x00, 0x00, 0x00, 0x00,
    0x00, 0xFC, 0xFF, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00,
    0x00, 0xFC, 0xFF, 0xFF, 0x01, 0x00, 0x00, 0x00, 0x00, 0xF0, 0xFF, 0xFF, 0x07, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0xFC, 0x17, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFC, 0x3F, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0xFE, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x7F, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xFF, 0xFF, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x80, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x7F, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  }//3
};

U8G2_SSD1306_128X64_NONAME_F_4W_HW_SPI u8g2(U8G2_R0,/*cs=*/7,/*dc=*/6,/*reset=*/3);//u8g2 init

void beep(int f, int t)
{
  if (mute == true)return;
  tone(9, f);
  delay(t);
  noTone(9);
}

int readbutton(int port)
{
  int v = analogRead(port);
  if (v < 20)return 0;
  else if (v < 370 && v > 330)
  {
    delay(100);
    s = millis();
    return 1;
  }
  else if (v < 710 && v > 670)
  {
    delay(100);
    s = millis();
    return 2;
  }
  else if (v < 760 && v > 720)
  {
    delay(100);
    s = millis();
    return 3;
  }
}
/*
  port:0=AB,1=LR,2=UD
  return:0=No,1=First,2=Second,3=All
*/

void drawmenu(int n)
{
  u8g2.clearBuffer();
  u8g2.drawRFrame(120, 0, 8, 64, 2);
  u8g2.drawBox(122, 2 + n * (60 / functions_num), 4, 60 / functions_num);
  u8g2.drawXBMP(16, 16, 32, 32, functions_icon[n]);
  u8g2.setCursor(64, 38);
  if (n == 0)u8g2.print("设置");
  else if (n == 1)u8g2.print("贪吃蛇");
  else if (n == 2)
  {
    u8g2.setCursor(64, 32);
    u8g2.print("俄罗斯");
    u8g2.setCursor(64, 44);
    u8g2.print("方块");
  }
  else if (n == 3)u8g2.print("手电筒");
  else if (n == 4)u8g2.print("电摇");
  u8g2.sendBuffer();
}

void light()
{
  u8g2.clearBuffer();
  u8g2.drawBox(0, 0, 128, 64);
  u8g2.sendBuffer();
  for (int i = contrast; i <= 255; i++)
  {
    u8g2.setContrast(i);
    delay(2);
  }
  while (1)
    if (readbutton(0) == 2)
    {
      beep(5000, 50);
      for (int i = 255; i >= contrast; i--)
      {
        u8g2.setContrast(i);
        delay(2);
      }
      return;
    }
}

void groove()
{
  while (1)
  {
    for (int i = 0; i <= 2; i++)
    {
      u8g2.clearBuffer();
      u8g2.drawXBMP(32, 0, 64, 64, groove_icon[i]);
      u8g2.sendBuffer();
      if (readbutton(0) == 2)
      {
        beep(5000, 50);
        return;
      }
    }
    for (int i = 1; i >= 0; i--)
    {
      u8g2.clearBuffer();
      u8g2.drawXBMP(32, 0, 64, 64, groove_icon[i]);
      u8g2.sendBuffer();
      if (readbutton(0) == 2)
      {
        beep(5000, 50);
        return;
      }
    }
  }
}

void setup() {
  u8g2.begin();
  u8g2.enableUTF8Print();
  u8g2.setFont(u8g2_font_wqy12_t_gb2312a);
  u8g2.setContrast(contrast);
  u8g2.clearBuffer();
  u8g2.drawXBMP(25, 21, 78, 22, Boot);
  u8g2.sendBuffer();
  delay(3000);
  s = millis();
}

void loop() {
  drawmenu(num);
  if (readbutton(2) == 2 && num < functions_num - 1)
  {
    num++;
    beep(5000, 50);
  }
  if (readbutton(2) == 1 && num > 0)
  {
    num--;
    beep(5000, 50);
  }
  if (readbutton(0) == 1)
  {
    if (num == 3)
    {
      beep(5000, 50);
      light();
    }
    if (num == 4)
    {
      beep(5000, 50);
      groove();
    }
  }
  if (millis() - s >= 5000)
  {
    u8g2.setPowerSave(1);
    while (1)
    {
      if ((readbutton(0) || readbutton(1)) || readbutton(2) != 0)
      {
        u8g2.setPowerSave(0);
        delay(100);
        break;
      }
    }
  }
}
